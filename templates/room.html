<link rel="stylesheet" href="/static/room.css">
<script src="/static/pomodoro.js"></script>



<div class="room-layout">

    <!-- MEMBERS SIDEBAR -->
    <aside class="members-panel">
        <h3>Members</h3>

        <ul class="member-list">
            {% for username, status in members %}
            <li class="member">
                <span class="status {{ status }}"></span>
                <span class="name">{{ username }}</span>
            </li>
            {% endfor %}
        </ul>
    </aside>

    <div class="files">
      <button id="toggleFiles" class="files-btn"> Files</button>
    </div>
    <div class="files-panel" id="filesPanel">
     {% for file in files %}
     <div class="file-item">
       <a href="/files/{{ file.filename }}">{{ file.filename }}</a>

      
     </div>
      {% else %}
      <p>No files uploaded yet</p>
       {% endfor %}
     </div>
     <script>
  const toggleBtn = document.getElementById("toggleFiles");
  const filesPanel = document.getElementById("filesPanel");

  toggleBtn.addEventListener("click", () => {
    filesPanel.classList.toggle("active");
  });
</script>

{% if room.pomodoro_enabled %}
<div class="pomodoro-box">
  <h3>Pomodoro Timer</h3>

  <div id="timer" class="timer-display">25:00</div>

  <div class="timer-buttons">
    <button onclick="startTimer()">Start</button>
    <button onclick="pauseTimer()">Pause</button>
    <button onclick="resetTimer()">Reset</button>
  </div>

  <p id="session-label">Work Session</p>
</div>
{% endif %}


<div class="room-container">

    <header>
        <h2>Room {{ room.room_code }}</h2>
        <span>{{ room.room_type | upper }} â€¢ {{ room.level }}</span>
    </header>

    <!-- CHAT SECTION -->
    {% if room.chat_type != "none" %}
    <div class="chat-box">
        <div class="messages">
            {% if room.chat_type == "quick" %}
                <p class="hint">Quick chat enabled</p>
            {% else %}
                <p class="hint">Free chat enabled</p>
            {% endif %}
        </div>

       <form id="chat-form">
  <input type="text" id="chat-input" placeholder="Type message..."{% if room.chat_type == "quick" %}disabled{% endif %} required>
  <button type="submit">Send</button>
</form>
    </div>
    {% endif %}
    

   <form action="/upload_file/{{ room.id }}" method="POST" enctype="multipart/form-data">
  <input type="file" name="file" required>
  <button type="submit" class="action-btn">Upload File</button>
</form>


    <!-- VOICE CHAT -->
    {% if room.voice_chat == "on" %}
    <button class="action-btn">ðŸŽ¤ Join Voice</button>
    {% endif %}

</div>
